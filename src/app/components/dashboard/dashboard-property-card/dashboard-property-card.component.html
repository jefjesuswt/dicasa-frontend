<div
  class="group relative bg-slate-950 border border-white/10 overflow-hidden hover:border-sky-500/30 transition-all duration-300"
>
  <div class="flex items-start p-4 gap-4">
    <div
      class="relative w-20 h-20 flex-shrink-0 overflow-hidden border border-white/10"
    >
      <img
        [src]="
          property.images && property.images.length
            ? property.images[0]
            : 'assets/images/placeholder-property.png'
        "
        [alt]="property.title"
        class="w-full h-full"
        onerror="this.onerror=null; this.src='assets/images/placeholder-property.png'"
      />
    </div>

    <div class="flex-1 min-w-0 pt-1">
      <h3
        class="text-sm font-bold text-white uppercase tracking-wide truncate mb-1"
      >
        {{ property.title }}
      </h3>
      <p
        class="text-xs text-sky-500 font-mono mb-2 truncate flex items-center gap-1"
      >
        <i class="pi pi-map-marker text-[10px]"></i>
        {{ property.address.city || "SIN UBICACIÓN" }}
      </p>

      <div
        class="text-xs text-slate-400 font-mono border-l-2 border-white/10 pl-2"
      >
        @if (property.type === 'house' || property.type === 'apartment' ||
        property.type === 'villa') {
        <span
          >{{ property.area || 0 }}M² / {{ property.bedrooms || 0 }}HAB /
          {{ property.bathrooms || 0 }}BÑ</span
        >
        } @else if (property.type === 'commercial') {
        <span
          >{{ property.area || 0 }}M² / {{ property.bathrooms || 0 }}BÑ</span
        >
        } @else if (property.type === 'land') {
        <span>{{ property.area || 0 }}M²</span>
        }
      </div>
    </div>
  </div>

  <div
    class="grid grid-cols-3 border-t border-white/10 divide-x divide-white/10 bg-white/[0.02]"
  >
    <div class="px-2 py-3 text-center">
      <span
        class="text-[10px] uppercase tracking-widest text-slate-500 block mb-1"
        >Precio</span
      >
      <span class="text-xs font-bold text-white font-mono">
        {{ property.price | currency : "USD" : "symbol" : "1.0-0" }}
      </span>
    </div>

    <div class="px-2 py-3 text-center">
      <span
        class="text-[10px] uppercase tracking-widest text-slate-500 block mb-1"
        >Tipo</span
      >
      <span class="text-xs font-medium text-slate-300 uppercase">
        {{ getTypeLabel(property.type) }}
      </span>
    </div>

    <div class="px-2 py-3 flex flex-col items-center justify-center">
      <span
        class="text-[10px] uppercase tracking-widest text-slate-500 block mb-1"
        >Estado</span
      >
      <span
        class="px-2 py-0.5 inline-flex text-[10px] leading-4 font-bold uppercase tracking-wider rounded-sm"
        [ngClass]="getStatusBadgeClass(property.status)"
        style="mix-blend-mode: screen"
      >
        {{ getStatusLabel(property.status) }}
      </span>
    </div>
  </div>

  <div class="p-2 flex justify-end gap-1 border-t border-white/10 bg-slate-950">
    <button
      (click)="onViewClick()"
      class="h-8 w-8 flex items-center justify-center text-slate-400 hover:text-sky-400 hover:bg-white/5 border border-transparent hover:border-white/10 transition-all"
      title="Ver detalles"
    >
      <i class="pi pi-eye"></i>
    </button>
    <button
      (click)="onEditClick()"
      class="h-8 w-8 flex items-center justify-center text-slate-400 hover:text-yellow-400 hover:bg-white/5 border border-transparent hover:border-white/10 transition-all"
      title="Editar propiedad"
    >
      <i class="pi pi-pencil text-xs"></i>
    </button>
    <button
      (click)="onDeleteClick()"
      class="h-8 w-8 flex items-center justify-center text-slate-400 hover:text-red-400 hover:bg-white/5 border border-transparent hover:border-white/10 transition-all"
      title="Eliminar propiedad"
    >
      <i class="pi pi-trash text-xs"></i>
    </button>
  </div>
</div>
